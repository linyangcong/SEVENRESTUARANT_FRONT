(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"00d7":function(t,e,n){"use strict";n.r(e);var s=n("e9b8"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},"05e0":function(t,e,n){"use strict";var s,o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}))},"1c26":function(t,e,n){"use strict";n.r(e);var s=n("8b53"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},2822:function(t,e,n){"use strict";n.r(e);var s=n("4b99"),o=n("00d7");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);var r,a=n("f0c5"),u=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);e["default"]=u.exports},"3ad9":function(t,e,n){"use strict";(function(t){n("3a1f");s(n("66fd"));var e=s(n("6799"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"420e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(n("b975")),o=a(n("2822")),i=a(n("eab1")),r=a(n("9257"));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){n.e("components/uni-drawer/uni-drawer").then(function(){return resolve(n("99af"))}.bind(null,n)).catch(n.oe)},c={data:function(){return{userInformation:{},clickId:"",add_modal:!1,config:i.default,fixed_search:"",showshoppingCar:!1}},mounted:function(){this.userInformation=this.$store.state.userInformation},methods:{goSearch:function(){t.showToast({title:"暂不支持查询",icon:"none"})},goaddAddress:function(){t.navigateTo({url:"selectAddress/selectAddress"})},addressStatus:function(t){this.addressflag=t},goProduce:function(){t.navigateTo({url:"./operation_page/operation_page"})},hidden_sheet:function(){this.showshoppingCar=!1},goShopping_car:function(){this.showshoppingCar=!0},touch_active_start:function(t){},touch_active_end:function(t){this.activlocationY=t.changedTouches[0].clientY-t.currentTarget.offsetTop},scanCode:function(){t.scanCode({scanType:["qrCode"],success:function(t){},fail:function(t){}})}},watch:{"$store.state.userInformation":function(e,n){this.userInformation=e,-1==this.userInformation.Id&&t.navigateTo({url:"../myDetail/login/login"})}},components:{comMain:s.default,shoppingCar:o.default,uniDrawer:u,selectedAddress:r.default},onShow:function(){-1!=this.$store.state.userInformation.Id&&void 0!=this.$store.state.userInformation.Id||t.navigateTo({url:"../myDetail/login/login"})}};e.default=c}).call(this,n("543d")["default"])},"4b99":function(t,e,n){"use strict";var s,o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.$store.state.shopping,(function(e,n){var s=t._f("getSize")(e.size),o=t._f("getPrice")(e.count);return{$orig:t.__get_orig(e),f0:s,f1:o}}))),s=t._f("getPrice")(t.$store.state.sums),o=t._f("getPrice")(t.$store.state.old_sums);t.$mp.data=Object.assign({},{$root:{l0:n,f2:s,f3:o}})},i=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}))},"4fa3":function(t,e,n){"use strict";var s,o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}))},"51a8":function(t,e,n){"use strict";var s=n("f8b9"),o=n.n(s);o.a},6799:function(t,e,n){"use strict";n.r(e);var s=n("4fa3"),o=n("e53e");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("ed37");var r,a=n("f0c5"),u=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,"34603e6e",null,!1,s["a"],r);e["default"]=u.exports},"7e63":function(t,e,n){},"81e3":function(t,e,n){"use strict";n.r(e);var s=n("9f2f"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},"8b53":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(n("eab1"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={name:"scroll_main",data:function(){return{distanceforyou:"",userInformation:{},refreshflag:!1,config:s.default,onload_modal:!1,discounted_today:{img:"../../static/imgs/swiper/hygz_01.jpg"},scroll_dir:!0,swiperItem_detail:[{name:"洪阳果汁",index:"1",urlImg:"../../static/imgs/swiper/hygz_01.jpg",path_url:"",decoration:"美味忘不掉，今天到店享受八折优惠",discounted:"8.8"},{name:"捞面",index:"2",urlImg:"../../static/imgs/swiper/lm_01.jpg",path_url:"",decoration:"",discounted:""}],detail_lists:[],business_detail_lists:[]}},methods:{goShopping:function(e){this.$store.dispatch("setbusiness",e),t.navigateTo({url:"select_main/select_main"})},go_detail:function(e,n){t.navigateTo({url:"./select_main/select_main?type_index="+n+"&index="+e.onlyIndex})},hidden_modal:function(){this.onload_modal=!this.onload_modal},cellect_dis:function(){this.onload_modal=!1,t.navigateTo({url:"activities/activities"})},refreshPulling:function(t){this.refreshflag=!0},refreshData:function(){var e=this;console.log(this.$store.state.userInformation.businessId),"01"==this.$store.state.userInformation.role?t.request({method:"GET",url:s.default.server+"/getBusiness",success:function(n){e.refreshRestore(),t.getLocation({success:function(t){e.detail_lists=[],n.data.businessLists.map((function(n){var s=n.location.split(",")[0],o=n.location.split(",")[1],i=e.GetDistance(t.latitude,t.longitude,s,o);e.detail_lists.push(r({},n,{lengKM:i}))}))}}),console.log(e.detail_lists)}}):"02"==this.$store.state.userInformation.role&&t.request({method:"GET",url:s.default.server+"/getProduct?businessId="+this.$store.state.userInformation.businessId,success:function(t){e.refreshRestore(),e.detail_lists=t.data.result_type,e.$store.dispatch("setBusiness",t.data.business)}}),this.refreshRestore()},Rad:function(t){return t*Math.PI/180},GetDistance:function(t,e,n,s){var o=this.Rad(t),i=this.Rad(n),r=o-i,a=this.Rad(e)-this.Rad(s),u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(o)*Math.cos(i)*Math.pow(Math.sin(a/2),2)));return u*=6378.137,u=Math.round(1e4*u)/1e4,u},refreshRestore:function(){this.refreshflag=!1}},mounted:function(){this.userInformation=this.$store.state.userInformation,this.refreshData()},watch:{"$store.state.userInformation":function(t,e){this.userInformation=this.$store.state.userInformation,this.refreshData()}},filters:{getdelType:function(t){return"00"==t?"配送类型:店铺配送":"01"==t?"配送类型:顺丰配送":"02"==t?"配送类型:蜂鸟专送":void 0},getlength:function(t){return void 0!=t?"距您"+t+"km":void 0==t?"定位失败":void 0}}};e.default=u}).call(this,n("543d")["default"])},9257:function(t,e,n){"use strict";n.r(e);var s=n("05e0"),o=n("81e3");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("51a8");var r,a=n("f0c5"),u=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,"e348ed82",null,!1,s["a"],r);e["default"]=u.exports},"9f2f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(n("eab1"));function o(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{editflag:!1,showBtn:"",config:s.default,userlist:[],add_modal:!1,clickId:"",newaddress:{name:"",mobile:"",address:"",location:{lat:"",long:""}},marker:[{latitude:"",longitude:""}],touchXY:[]}},methods:{DeleteUserAddress:function(e){var n=this;t.showModal({title:"温馨提示！",content:"您确认删除本条信息吗？",cancelText:"否",confirmText:"是",success:function(o){console.log(o),o.confirm&&t.request({url:s.default.server+"/delAddress",data:{Id:e.Id},method:"POST",success:function(e){200==e.statusCode?t.showToast({title:"删除成功",icon:"none"}):t.showToast({title:"删除失败",icon:"none"}),n.getUserlist()}})}}),console.log(e)},EditUserAddress:function(t){console.log(t),this.newaddress={Id:t.Id,name:t.userName,mobile:t.phoneNo,address:t.address,location:{lat:t.location.split(",")[0],long:t.location.split(",")[1]}},this.editflag=!0,this.add_modal=!0},startTouch:function(t,e){this.touchXY=[t.changedTouches[0].clientX,t.changedTouches[0].clientY]},endTouch:function(t,e){console.log(this.$refs[e]),this.touchXY[0]>=t.changedTouches[0].clientX+60?this.showBtn=e:this.touchXY[0]+60<=t.changedTouches[0].clientX&&(this.showBtn="")},selectUserItem:function(e){console.log(e),this.clickId=e.onlyId,console.log(this.$store.state.userInformation),this.$store.dispatch("setUseraddress",e),t.showToast({title:"当前用户切换为"+this.$store.state.userInformation.def_address.userName,icon:"none"})},createAddress:function(){var e=this;""!=this.newaddress.name&&""!=this.newaddress.mobile&&""!=this.newaddress.address?(this.newaddress.fk_b=this.$store.state.userInformation.Id,this.newaddress.editflag=this.editflag,t.request({url:s.default.server+"/addAddress",method:"POST",data:this.newaddress,success:function(n){200==n.statusCode&&(t.showToast({title:"提交成功",icon:"none"}),e.editflag=!1,e.closecreateAddress(),e.getUserlist()),console.log(n)},fail:function(t){}})):t.showToast({title:"联系人不能为空",icon:"none"})},getmapLoacation:function(e){void 0==e.detail.latitude?""==this.newaddress.location.lat&&t.showToast({title:"地图定位失败，请确保收货地址精确",icon:"none"}):(this.marker[0].latitude=e.detail.latitude,this.marker[0].longitude=e.detail.longitude,this.newaddress.location.lat=e.detail.latitude,this.newaddress.location.long=e.detail.longitude)},closecreateAddress:function(){this.add_modal=!this.add_modal},getUserlist:function(){var e=this;console.log(this.$store.state.userInformation),t.request({url:s.default.server+"/getUserList?userType="+this.$store.state.userInformation.role+"&userId="+this.$store.state.userInformation.Id+"&businessId="+this.$store.state.userInformation.businessId,method:"GET",success:function(t){console.log(t),e.userlist=t.data.userlist,0!==t.data.userlist.length?e.$emit("addressStatus",!0):e.$emit("addressStatus",!1)}})}},mounted:function(){var e=this;t.getLocation({success:function(t){e.marker[0].latitude=t.latitude,e.marker[0].longitude=t.longitude},fail:function(e){t.showToast({title:"该地图不支持获取定位",icon:"none"})}}),this.getUserlist()}};e.default=i}).call(this,n("543d")["default"])},b27f:function(t,e,n){"use strict";var s,o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.detail_lists,(function(e,n){var s=t._f("getdelType")(e.shopdel),o=t._f("getlength")(e.lengKM);return{$orig:t.__get_orig(e),f0:s,f1:o}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}))},b975:function(t,e,n){"use strict";n.r(e);var s=n("b27f"),o=n("1c26");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("dd07");var r,a=n("f0c5"),u=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,"6cb13824",null,!1,s["a"],r);e["default"]=u.exports},d98f:function(t,e,n){},dd07:function(t,e,n){"use strict";var s=n("d98f"),o=n.n(s);o.a},e53e:function(t,e,n){"use strict";n.r(e);var s=n("420e"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},e9b8:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(n("eab1"));function o(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{config:s.default}},props:["selected_item"],methods:{goPay:function(){var e=0,n=0;this.$store.state.shopping.map((function(t){e+=t.count})),n=(parseFloat(this.$store.state.selectedBusiness.shopstartfee)-e).toFixed(2),this.$store.state.sums<=0?t.showToast({title:"结算异常",icon:"none"}):n>0?t.showToast({title:"还差￥"+n+"起送",icon:"none"}):t.navigateTo({url:"../seeMap/seeMap"})},operate_shopping_num:function(t,e){"add"==t?this.$store.dispatch("operate_shoppingNum_add",e):this.$store.dispatch("operate_shoppingNum_dec",e)},addShopping:function(){void 0!=this.selected_item.Id&&this.$store.dispatch("addShopping",this.selected_item)},changeSize:function(e){var n=this;t.showActionSheet({itemList:["小分","中等","大分"],itemColor:"#007AFF",success:function(s){var o=0;0==s.tapIndex&&(o="s"),1==s.tapIndex&&(o="m"),2==s.tapIndex&&(o="l"),console.log(n.$store.state.order[0].size_type),n.$store.state.order[0].size_type.indexOf(o)<0?t.showToast({title:"该型号已售空",icon:"none"}):n.$store.dispatch("changeSize_goods",{goodsId:e,size:o})},fail:function(t){}})}},filters:{getSize:function(t){return"s"==t?"小份":"m"==t?"中份":"l"==t?"大份":void 0},getPrice:function(t){return t.toFixed(2)}}};e.default=i}).call(this,n("543d")["default"])},ed37:function(t,e,n){"use strict";var s=n("7e63"),o=n.n(s);o.a},f8b9:function(t,e,n){}},[["3ad9","common/runtime","common/vendor"]]]);